{"ast":null,"code":"function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction onPageLoad(controller_and_actions, callback) {\n  document.addEventListener('turbolinks:load', function () {\n    var conditions = regularize(controller_and_actions);\n\n    if (!conditions) {\n      console.error('[onPageLoad] Unexpected arguments!');\n      return;\n    }\n\n    conditions.forEach(function (a_controller_and_action) {\n      var _a_controller_and_act = a_controller_and_action.split('#'),\n          _a_controller_and_act2 = _slicedToArray(_a_controller_and_act, 2),\n          controller = _a_controller_and_act2[0],\n          action = _a_controller_and_act2[1];\n\n      if (isOnPage(controller, action)) {\n        callback();\n      }\n    });\n  });\n}\n\nfunction regularize(controller_and_actions) {\n  if (typeof controller_and_actions == 'string') {\n    return [controller_and_actions];\n  } else if (Object.prototype.toString.call(controller_and_actions).includes('Array') //controller_and_actions.isArray()\n  ) {\n      return controller_and_actions;\n    } else {\n    return null;\n  }\n}\n\nfunction isOnPage(controller, action) {\n  var selector = \"body[data-controller='\".concat(controller, \"']\");\n\n  if (!!action) {\n    selector += \"[data-action='\".concat(action, \"']\");\n  }\n\n  ;\n  return document.querySelectorAll(selector).length > 0;\n} //=========================================================\n\n\nonPageLoad('home#top', function () {\n  var ctx = document.getElementById('top_chart');\n  var graphValues = gon.graph_values;\n  var topChart;\n  var daysLabel = [];\n  var maximumValue = Math.max.apply(null, graphValues);\n  var scale;\n\n  for (var i = 0; i < 10; i++) {\n    var now = new Date();\n    var day = new Date(now.getFullYear(), now.getMonth(), now.getDate() - i);\n    daysLabel.unshift(\"\".concat(day.getMonth() + 1, \"\\u6708\").concat(day.getDate(), \"\\u65E5\"));\n  }\n\n  if (maximumValue <= 10) {\n    scale = {\n      step: 1,\n      max: 10\n    };\n  } else if (maximumValue <= 50) {\n    scale = {\n      step: 5,\n      max: 50\n    };\n  } else {\n    scale = {\n      step: 10,\n      max: 100\n    };\n  }\n\n  topChart = new Chart(ctx, {\n    type: 'line',\n    data: {\n      labels: daysLabel,\n      datasets: [{\n        label: '保護されたことりの数',\n        data: graphValues,\n        borderColor: \"rgb(102, 204, 55)\",\n        backgroundColor: \"rgba(0,0,0,0)\"\n      }]\n    },\n    options: {\n      title: {\n        display: true,\n        text: \"\".concat(daysLabel[0], \" ~ \").concat(daysLabel.slice(-1)[0])\n      },\n      scales: {\n        yAxes: [{\n          ticks: {\n            suggestedMax: scale.max,\n            suggestedMin: 0,\n            stepSize: scale.step,\n            callback: function callback(value, index, values) {\n              return value + '羽';\n            }\n          }\n        }]\n      }\n    }\n  });\n});\nonPageLoad('mypage#direct_messages', function () {\n  tabs = document.querySelectorAll('.tab');\n  tables = document.querySelectorAll('table');\n  console.log(tabs);\n  tabs[tabs.length - 1].classList.add('inactive');\n  tables[tables.length - 1].classList.add('inactive');\n  tabs.forEach(function (tab, index) {\n    tab.classList.remove('inactive');\n  });\n});","map":{"version":3,"sources":["/dokotory/app/javascript/packs/home_mypage.js"],"names":["onPageLoad","controller_and_actions","callback","document","addEventListener","conditions","regularize","console","error","forEach","a_controller_and_action","split","controller","action","isOnPage","Object","prototype","toString","call","includes","selector","querySelectorAll","length","ctx","getElementById","graphValues","gon","graph_values","topChart","daysLabel","maximumValue","Math","max","apply","scale","i","now","Date","day","getFullYear","getMonth","getDate","unshift","step","Chart","type","data","labels","datasets","label","borderColor","backgroundColor","options","title","display","text","slice","scales","yAxes","ticks","suggestedMax","suggestedMin","stepSize","value","index","values","tabs","tables","log","classList","add","tab","remove"],"mappings":"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","sourcesContent":["\n\nfunction onPageLoad(controller_and_actions, callback) {\n  document.addEventListener('turbolinks:load', ()=>{\n    const conditions = regularize(controller_and_actions);\n    if (!conditions) {\n      console.error('[onPageLoad] Unexpected arguments!');\n      return;\n    }\n    conditions.forEach(a_controller_and_action =>{\n      const [controller, action] = a_controller_and_action.split('#');\n      if (isOnPage(controller, action)) {\n        callback();\n      }\n    });\n  });\n}\n\nfunction regularize(controller_and_actions) {\n  if (typeof controller_and_actions == 'string') {\n    return[controller_and_actions];\n  } else if (\n    Object.prototype.toString.call(controller_and_actions).includes('Array')\n    //controller_and_actions.isArray()\n  ) {\n    return controller_and_actions;\n  } else {\n    return null;\n  }\n}\n\nfunction isOnPage(controller, action) {\n  var selector = `body[data-controller='${controller}']`;\n  if (!!action) {\n    selector += `[data-action='${action}']`\n  };\n  return document.querySelectorAll(selector).length > 0;\n}\n\n//=========================================================\n\nonPageLoad('home#top', ()=>{\n\n   var ctx = document.getElementById('top_chart');\n   var graphValues = gon.graph_values;\n   var topChart;\n   var daysLabel = [];\n   var maximumValue = Math.max.apply(null, graphValues);\n   var scale;\n\n   for (var i = 0; i < 10; i++) {\n     var now = new Date();\n     var day = new Date(now.getFullYear(), now.getMonth(), now.getDate() - i);\n     daysLabel.unshift(`${day.getMonth() + 1}月${day.getDate()}日`);\n   }\n\n   if (maximumValue <= 10) {\n     scale = {step: 1, max: 10};\n   } else if (maximumValue <= 50) {\n     scale = {step: 5, max: 50};\n   } else {\n     scale = {step: 10, max: 100};\n   }\n\n  topChart = new Chart(ctx, {\n    type: 'line',\n    data: {\n      labels: daysLabel,\n      datasets: [\n        {\n          label: '保護されたことりの数',\n          data: graphValues,\n          borderColor: \"rgb(102, 204, 55)\",\n          backgroundColor: \"rgba(0,0,0,0)\"\n        }\n      ],\n    },\n    options: {\n      title: {\n        display: true,\n        text: `${daysLabel[0]} ~ ${daysLabel.slice(-1)[0]}`\n      },\n      scales: {\n        yAxes: [{\n          ticks: {\n            suggestedMax: scale.max,\n            suggestedMin: 0,\n            stepSize: scale.step,\n            callback: function(value, index, values){\n              return  value +  '羽'\n            }\n          }\n        }]\n      },\n    }\n  });\n});\n\nonPageLoad('mypage#direct_messages', ()=>{\n  tabs = document.querySelectorAll('.tab');\n  tables = document.querySelectorAll('table');\n  console.log(tabs);\n\n  tabs[tabs.length - 1].classList.add('inactive');\n  tables[tables.length - 1].classList.add('inactive');\n\n  tabs.forEach((tab, index) =>{\n    tab.classList.remove('inactive');\n  });\n});\n"]},"metadata":{},"sourceType":"module"}